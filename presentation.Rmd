---
title: "Prüfungstutorium QM I"
author: "mit Tobi & Lukas"
date: "Rendered at `r format(Sys.time(), '%F %H:%M')`"
output:
  revealjs::revealjs_presentation:
    css: "assets/styles.css"
    theme: simple
    highlight: pygments
    incremental: false
    transition: slide
    widescreen: yes
    background_transition: slide
    self_contained: false
    fig_height: 7
    fig_retina: 2
    fig_width: 12
    lib_dir: "assets"
    reveal_options:
      slideNumber: true
      progress: true
      history: true
      center: true
  html_document:
    fig_caption: yes
    fig_width: 9
    number_sections: no
    self_contained: no
    lib_dir: "assets"
    toc: yes
    toc_float: true
    code_folding: show
    include:
      after_body: "assets/_footer.html"
---

```{r global_options, include=FALSE}
knitr::opts_chunk$set(fig.path = "assets/plots/", fig.align = "center", 
                      fig.retina = 2, echo = F, warning = F, message = F)
library(sjPlot)
library(dplyr)
library(knitr)
library(ggplot2)
library(tadaatoolbox)
library(mosaic)
library(magrittr)
library(car)
library(formattable)
library(htmlTable)
library(tidyr)

# NGO & FKV Datensatz einlesen
fkv <- haven::read_sav("./data/fkv.sav")

# 3 digits are enough
options(digits = 3)

# selfmade ggplot-Theme laden und global setzen
source("./assets/theme_tut.R")
theme_set(theme_tut(style = "light"))
```

# Agenda

##

1. Aufgaben besprechen
2. Fragen klären
3. Angrenzende Theorie besprechen

##

Erfahrungsgemäß reicht die Zeit …  

> - … **entweder** für alle **Aufgaben**…  
> - … **oder** für alle **Fragen**.  

<p class="fragment">Choose wisely.</p>

# Aufgabe 1 <br><br> Faktorenanalyse

##

Im Rahmen einer Hauptkomponentenanalyse wurde die folgende Komponenten-Matrix ermittelt:

![](assets/plots/ladungen.png)

```{r A01_data, echo = F}
a01 <- data.frame(
      Merkmal = paste0("A", 1:15),
           K1 = c(-.724, -.294, .665, .639, -.599, .388, .643, -.544,
                  -.274, .571, -.230, .737, .789, .672, .630),
           K2 = c(.351, .642, .310, .2, .622, .39, .398, .429, .407, .334, 
                  .177, 0, .256, -.024, .134),
           K3 = c(.036, -.01, -.311, .053, .001, -.530, -.003, .349, .266,
                  -.323, .412, .389, .104, .520, .366)
      ) 
```

## Beantworten Sie folgende Fragen

a) Was bedeuten die drei Werte innerhalb der zweiten Zeile?
b) Wie groß ist die Kommunalität des durch „A10“ gekennzeichneten Merkmals?
c) Welchen Wert besitzt der drittgrößte Eigenwert?
d) Wie viel Prozent der Gesamtvarianz aller 15 in die Faktorenanalyse einbezogenen (standardisierten) Merkmale wird durch den 3. Faktor erklärt?
e) Warum enthält die Komponenten-Matrix vermutlich nur drei Spalten?
f) Auf welche Faktoren laden die durch „A1“ bis „A15“ gekennzeichneten Merkmale jeweils am höchsten?
g) Gibt es bei den - im Rahmen der Suche nach einer Einfachstruktur - innerhalb von „6)“ vorgenommenen Zuordnungen an irgendeiner Stelle ein Problem, sodass es sinnvoll erscheinen könnte, eine Rotation durchzuführen?

##

Was bedeuten die drei Werte innerhalb der zweiten Zeile?

```{r A01_a}
cols <- with(a01, ifelse(Merkmal == "A2", '#58FF4F', 'white'))

htmlTable(as.matrix(a01[c(1:5),]), col.rgroup = cols)
```

##

Wie groß ist die Kommunalität des durch „A10“ gekennzeichneten Merkmals?

```{r A01_b}
htmlTable(as.matrix(a01[c(9:12),]), col.rgroup = cols)
```

<p class="fragment">$$0.571^2 +  0.334^2 - 0.323^2 \approx 0.333$$</p>


## Welchen Wert besitzt der drittgrößte Eigenwert?

Faktor 1 | Faktor 2 | Faktor 3 
---------|----------|---------
`r sum(a01$K1^2)` | `r sum(a01$K2^2)` | `r sum(a01$K3^2)`


##

Wie viel Prozent der Gesamtvarianz aller 15 in die Faktorenanalyse einbezogenen (standardisierten) Merkmale wird durch den 3. Faktor erklärt?

<p class="fragment">$$0.036^2 - 0.1^2 - 0.311^2 + 0.053^2 + \ldots = `r sum(a01$K3^2)`$$</p>

##

Warum enthält die Komponenten-Matrix vermutlich nur drei Spalten?  
Auf welche Faktoren laden die durch „A1“ bis „A15“ gekennzeichneten Merkmale jeweils am höchsten?

![](assets/plots/ladungen.png)

##

Auf welche Faktoren laden die durch „A1“ bis „A15“ gekennzeichneten Merkmale jeweils am höchsten?

![](assets/plots/ladungen_max.png)

##

Gibt es bei den - im Rahmen der Suche nach einer Einfachstruktur - innerhalb von „6)“ vorgenommenen Zuordnungen an irgendeiner Stelle ein Problem, sodass es sinnvoll erscheinen könnte, eine Rotation durchzuführen?

![](assets/plots/ladungen_pcor.png)
  
# Aufgabe 2 <br /><br />Faktorenanalyse… Nochmal

##

Schauen Sie sich den **FKV** Fragebogen an und überlegen Sie, welche Items zu welchem Faktor zusammengefasst werden könnten. Führen Sie anschließend eine **Hauptkomponentenanalyse** für den FKV- Datensatz durch. Prüfen Sie, welche Faktoren Sie zuvor inhaltlich angedacht hatten und welche Faktoren die Testautoren benannt haben (siehe Folie der letzten Veranstaltung). Stimmen die statistischen Daten damit überein?

# Aufgabe 3 <br /><br />Variabilität

##

Sie haben Werte des Merkmals „**Unterrichtsstunden**“ u.a. zur Berechnung der Variabilitätsmaße und Zentralmaße verwendet. Reflektieren Sie die Zentral- und Variabilitätsmaße. Sind alle Statistiken gut geeignet?

# Aufgabe 4 <br /><br />Standardabweichung

##

Sie haben folgende Zahlen vorliegen: 7, 9, 10, 11, 11, 14, 15, 16. Berechnen Sie für diese Werte die Standardabweichung per Hand.

# Aufgabe 5 <br /><br />z-Standardisierung

##

Berechnen Sie für die Werte 23, 27 und 31 von „stunzahl“ (Auswahl der Schülerinnen der 13. Klasse) die standardisierten Werte per Hand.

```{r a05}
values <- ngo %>% filter(jahrgang == "13", geschl == "Weiblich") %>% 
  summarize(mean = mean(stunzahl), sd = sd(stunzahl))
```

<div class = "fragment">
z-Standardisierung: $$z_i = \frac{x_i - \bar{x}}{\sigma}$$
</div>

>* Werte: $\bar{x} = `r values$mean`$ und $\sigma = `r values$sd`$
>* $23 \rightarrow \frac{23 - 29.52}{5.78158} \approx -1.1277194$
>* $27 \rightarrow \frac{27 - 29.52}{5.78158} \approx -0.4358670$
>* $31 \rightarrow \frac{31 - 29.52}{5.78158} \approx 0.2559854$

